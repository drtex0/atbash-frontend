(this["webpackJsonp@atbash/frontend"]=this["webpackJsonp@atbash/frontend"]||[]).push([[7],{807:function(e,t,n){"use strict";var i=n(729),c=n(3);t.a=function(e){var t=e.bondLogoPath,n={height:"32px",width:"32px"};return e.isLP&&(n={height:"32px",width:"62px"}),Object(c.jsx)(i.a,{display:"flex",alignItems:"center",justifyContent:"center",width:"64px",children:Object(c.jsx)("img",{src:t,style:n})})}},833:function(e,t,n){"use strict";n.r(t);var i=n(9),c=n(19),a=n(0),r=n(818),s=n.n(r),o=n(842),d=n(828),b=n(835),j=n(783),l=n(843),u=n(729),p=n(712),O=n(224),x=n(115),m=n(49),g=n(806),h=n(807),f=n(223),v=n(799),y=n(33),A=n(73),k=n(140),D=n(222),I=n(101),C=n(827),P=n(784),w=n(785),K=n(159),S=n(839),B=n(840),E=n(832),R=n(837),T=n(841),F=n(788),L=n(3),W=function(e){var t=e.slippage,n=e.recipientAddress,i=e.handleChange,r=e.handleClose,s=Object(F.a)().t,o=Object(a.useState)(t.toString()),d=Object(c.a)(o,2),b=d[0],l=d[1],p=Object(a.useState)(n),O=Object(c.a)(p,2),x=O[0],m=O[1];return Object(a.useEffect)((function(){i({recipientAddress:x,slippage:Number(b)})}),[b,x]),Object(L.jsxs)(P.a,{sx:{p:y.a.spacing(2),pb:y.a.spacing(4)},children:[Object(L.jsx)(u.a,{textAlign:"right",children:Object(L.jsx)(w.a,{onClick:r,children:Object(L.jsx)(K.a,{color:"primary",component:C.a})})}),Object(L.jsx)(j.a,{variant:"h4",children:Object(L.jsx)(L.Fragment,{children:s("bond:Settings")})}),Object(L.jsxs)(u.a,{mt:y.a.spacing(4),children:[Object(L.jsxs)(S.a,{variant:"outlined",color:"primary",fullWidth:!0,children:[Object(L.jsx)(B.a,{component:"legend",children:Object(L.jsx)(L.Fragment,{children:s("bond:Slippage")})}),Object(L.jsx)(E.a,{value:b,onChange:function(e){l(e.target.value)},fullWidth:!0,type:"number",endAdornment:Object(L.jsx)(R.a,{position:"end",children:Object(L.jsx)(L.Fragment,{children:" %"})})}),Object(L.jsx)(T.a,{children:Object(L.jsx)(L.Fragment,{children:s("bond:SlippageHelpText")})})]}),Object(L.jsxs)(S.a,{variant:"outlined",color:"primary",fullWidth:!0,sx:{mt:y.a.spacing(4)},children:[Object(L.jsx)(B.a,{component:"legend",children:Object(L.jsx)(L.Fragment,{children:s("bond:RecipientAddress")})}),Object(L.jsx)(E.a,{className:"bond-input",id:"recipient",value:x,onChange:function(e){return m(e.target.value)},type:"text"}),Object(L.jsx)(T.a,{children:Object(L.jsx)(L.Fragment,{children:s("bond:RecipientAddressHelpText")})})]})]})]})},H=n(789),M=n(800),V=n(71),N=n(94),Y=n(802),J=function(e){var t=e.bondID,n=e.slippage,i=e.recipientAddress,c=Object(F.a)().t,a=Object(x.d)(),r=Object(N.c)(),s=r.signer,o=r.signerAddress,d=Object(x.e)((function(e){return Object(D.f)(e,t)})),j=Object(x.e)((function(e){return Object(D.d)(e,t)}));return Object(L.jsx)(u.a,{sx:{color:"white",marginBottom:2,paddingBottom:2},children:Object(L.jsx)(b.a,{container:!0,children:Object(L.jsx)(b.a,{item:!0,xs:12,children:Object(L.jsx)(Y.a,{initialValue:0,maxValue:(null===d||void 0===d?void 0:d.balance)||0,transactionType:"BASH_APPROVAL",approvesNeeded:!(null!==d&&void 0!==d&&d.allowance),onApprove:function(){a(Object(I.a)({signer:s,bondID:t}))},onAction:function(e){a(Object(I.d)({amount:e,signer:s,signerAddress:o,bondID:t,slippage:n,recipientAddress:i}))},approveLabel:c("bond:ZapinApproveToken",{token:j?j.bondOptions.displayName:""}),actionLabel:c("bond:Mint")})})})})},q=function(e){var t=e.bondID,n=e.metrics,i=e.recipientAddress,c=e.slippage,r=Object(F.a)().t,s=Object(D.h)(n),o=s.balance,d=s.quote,b=s.maxBondPrice,j=s.vestingTerm,l=s.bondDiscount,p=[{value:o,metricKey:r("bond:YourBalance")},{value:d,metricKey:r("bond:YouWillGet")},{value:b?Object(V.c)(b,2).toString():null,metricKey:r("bond:MaxYouCanBuy")},{metricKey:r("bond:Discount"),value:l},{metricKey:r("bond:VestingTerm"),value:r("common:day",{count:j||0})},{metricKey:r("bond:MinimumPurchase"),value:"0.01 BASH"}].map((function(e,t){var n=e.value,i=e.metricKey;return Object(a.createElement)(M.a,{value:n,metricKey:i,key:t})}));return Object(L.jsxs)(u.a,{children:[Object(L.jsx)(J,{bondID:t,slippage:c,recipientAddress:i}),Object(L.jsx)(H.a,{variant:"fullWidth",textAlign:"center",sx:{borderColor:y.a.palette.primary.light,marginBottom:y.a.spacing(2)}}),Object(L.jsx)(u.a,{children:p})]})},G=function(e){var t=e.bondID,n=e.slippage,i=e.recipientAddress,c=Object(x.e)(D.l),a=Object(x.e)((function(e){return Object(D.f)(e,t)}));return c?Object(L.jsx)(q,{bondID:t,metrics:a,slippage:n,recipientAddress:i}):Object(L.jsx)(f.a,{})},Z=n(778),_=n(278),z=function(e){var t=e.bondID,n=e.metrics,i=e.recipientAddress,c=Object(x.d)(),r=Object(F.a)().t,s=Object(D.k)(n),o=s.bondDiscount,d=s.vestingTerm,b=Object(x.e)((function(e){return Object(D.j)(e,r)})),j=Object(x.e)(_.a),l=Object(x.e)(_.b),p=Object(A.c)().state,O=p.networkID,m=p.signer,g=[{value:b.interestDue,metricKey:r("bond:PendingRewards")},{value:b.pendingPayout,metricKey:r("bond:PendingPayout")},{value:b.vesting,metricKey:r("bond:TimeFullyVested")},{value:o,metricKey:r("ROI")},{value:r("common:day",{count:d||0}),metricKey:r("bond:VestingTerm")}].map((function(e,t){var n=e.value,i=e.metricKey;return Object(a.createElement)(M.a,{value:n,metricKey:i,key:t})}));Object(a.useEffect)((function(){O&&c(Object(I.b)({bondID:t,value:0,networkID:O}))}),[O]);var h=function(e){var n=e.isAutoStake;m&&c(Object(I.j)({recipientAddress:i,bondID:t,isAutoStake:n,signer:m}))};return Object(L.jsxs)(u.a,{children:[Object(L.jsxs)(u.a,{sx:{justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column",mb:y.a.spacing(2)},children:[Object(L.jsx)(u.a,{mt:y.a.spacing(2),width:"50%",p:y.a.spacing(2),children:Object(L.jsx)(Z.a,{sx:{width:"5rem"},onClick:function(){return h({isAutoStake:!1})},children:r(j?"common:PendingEllipsis":"bond:Claim")})}),Object(L.jsx)(u.a,{mt:y.a.spacing(2),width:"50%",p:y.a.spacing(2),children:Object(L.jsx)(Z.a,{sx:{width:"5rem"},onClick:function(){return h({isAutoStake:!0})},children:r(l?"common:PendingEllipsis":"bond:ClaimAutostake")})})]}),Object(L.jsx)(H.a,{variant:"fullWidth",textAlign:"center",sx:{borderColor:y.a.palette.primary.light,marginBottom:y.a.spacing(2)}}),Object(L.jsx)(u.a,{children:g})]})},Q=function(e){var t=e.bondID,n=e.recipientAddress,i=Object(x.e)(D.l),c=Object(x.e)((function(e){return Object(D.f)(e,t)}));return i?Object(L.jsx)(z,{bondID:t,metrics:c,recipientAddress:n}):Object(L.jsx)(f.a,{})},U=function(e){var t,n,r=e.open,f=e.bondID,C=e.bond,P=Object(m.f)(),w=Object(x.d)(),K=Object(a.useContext)(A.a).state,S=K.signer,B=K.signerAddress,E=Object(a.useState)(!1),R=Object(c.a)(E,2),T=R[0],F=R[1],H=Object(x.e)(k.c),M=Object(x.e)((function(e){return Object(D.i)(e,f)})),V=Object(a.useState)(.5),N=Object(c.a)(V,2),Y=N[0],J=N[1],q=Object(a.useState)(B),Z=Object(c.a)(q,2),_=Z[0],z=Z[1],U=Object(a.useRef)(null),X=[{label:Object(O.b)("mint:Mint"),component:Object(L.jsx)(G,{bondID:f,slippage:Y,recipientAddress:null!==_&&void 0!==_?_:""})},{label:Object(O.b)("mint:Redeem"),component:Object(L.jsx)(Q,{bondID:f,recipientAddress:null!==_&&void 0!==_?_:""})}];return Object(a.useEffect)((function(){B&&w(Object(I.i)({address:B,bondID:f}))}),[B]),Object(a.useEffect)((function(){S&&B&&w(Object(I.c)({signer:S,signerAddress:B,bondID:f}))}),[S,B]),Object(L.jsxs)(o.a,{onBackdropClick:function(){return P.goBack()},open:r,maxWidth:"xl",fullWidth:!0,PaperProps:{sx:{background:y.a.palette.cardBackground.light,color:y.a.palette.primary.dark}},sx:(t={p:4},Object(i.a)(t,y.a.breakpoints.up("xs"),{p:0}),Object(i.a)(t,"backdropFilter","blur(10px)"),t),children:[Object(L.jsx)(d.a,{sx:{display:"flex",position:"relative",alignItems:"center",justifyContent:"center",gap:y.a.spacing(1)},children:Object(L.jsxs)(b.a,{container:!0,children:[Object(L.jsxs)(b.a,{item:!0,xs:10,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(L.jsx)(h.a,{bondLogoPath:C.bondOptions.iconPath,isLP:C.isLP()}),Object(L.jsx)(j.a,{variant:"body1",children:C.bondOptions.displayName})]}),Object(L.jsx)(b.a,{item:!0,xs:2,onClick:function(){F((function(e){return!e}))},sx:{textAlign:"right"},children:Object(L.jsx)(s.a,{})})]})}),Object(L.jsx)(l.a,{sx:Object(i.a)({position:"relative",minHeight:"40rem"},y.a.breakpoints.only("xs"),{padding:y.a.spacing(1)}),children:Object(L.jsxs)(u.a,{sx:{position:"relative",width:"100%"},children:[Object(L.jsxs)(u.a,{sx:(n={},Object(i.a)(n,y.a.breakpoints.only("xs"),{paddingRight:y.a.spacing(1)}),Object(i.a)(n,"position","absolute"),Object(i.a)(n,"width","100%"),Object(i.a)(n,"opacity",T?.1:1),n),children:[Object(L.jsx)(u.a,{sx:Object(i.a)({},y.a.breakpoints.only("xs"),{paddingRight:y.a.spacing(1)}),children:Object(L.jsxs)(b.a,{container:!0,item:!0,xs:12,mb:4,children:[Object(L.jsx)(b.a,{item:!0,xs:12,sm:6,children:Object(L.jsx)(v.default,{metricKey:Object(O.b)("bond:MintPrice"),value:M},"MintPrice")}),Object(L.jsx)(b.a,{item:!0,xs:12,sm:6,children:Object(L.jsx)(v.default,{metricKey:Object(O.b)("BASHPrice"),value:H},"BashPrice")})]})}),Object(L.jsx)(u.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(L.jsx)(g.a,{tabs:X})})]}),Object(L.jsx)(u.a,{sx:Object(i.a)({overflow:"hidden",position:"absolute",width:T?"100%":"0",height:"25rem"},y.a.breakpoints.only("xs"),{paddingRight:y.a.spacing(1)}),ref:U,children:Object(L.jsx)(p.a,{direction:"left",in:!0===T,mountOnEnter:!0,unmountOnExit:!0,timeout:300,container:U.current,children:Object(L.jsx)(b.a,{item:!0,xs:12,sx:{paddingBottom:y.a.spacing(1),paddingTop:y.a.spacing(1),height:"100%"},children:Object(L.jsx)(W,{slippage:Y,recipientAddress:null!==_&&void 0!==_?_:"",handleChange:function(e){Y!==e.slippage&&J(e.slippage),_!==e.recipientAddress&&z(e.recipientAddress)},handleClose:function(){return F(!1)}})})})})]})})]})};t.default=function(e){var t=e.open,n=e.bondID,i=Object(x.e)((function(e){return Object(D.g)(e,n)})),c=Object(x.e)((function(e){return Object(D.d)(e,n)}));return i&&c?Object(L.jsx)(U,{open:t,bondID:n,bond:c}):Object(L.jsx)(f.a,{})}}}]);
//# sourceMappingURL=7.f066f10f.chunk.js.map